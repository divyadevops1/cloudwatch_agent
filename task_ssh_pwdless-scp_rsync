ssh passwordless from ec2-A to ec2-B
source A
$ssh-keygen -t rsa -b 2048
It will create:
~/.ssh/id_rsa (private key)
~/.ssh/id_rsa.pub (public key)

$ cat ~/.ssh/id_rsa.pub
copy the output
# On Machine B
mkdir -p ~/.ssh
echo "<paste-public-key-here>" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys

test connection from source to remote dest ip B
$ssh ec2-user@<remote-ip>
 example:
$ ssh ec2-user@3.145.86.177
if it connects 
scp /home/ec2-user/newfile.txt ec2-user@3.145.86.177:/home/ec2-user/files
test the file exists in destination machine.


if you want to transfer files from local machine to remote server give public key of the destination machine
 scp -i "/c/Users/HP/Downloads/docker_class1.pem"  "/c/Users/HP/Downloads/yesterday.txt" ubuntu@13.59.173.22:/home/ubuntu/files/
yesterday.txt  

check in the remote server the file existed .


transferring directories
 scp -i "/c/Users/HP/Downloads/docker_class1.pem" -r "/c/Users/HP/Downloads/today/" ubuntu@13.59.173.22:/home/ubuntu/files/

check in the remote machine the directory exists

if you want to transfer the files from destiantion machine to source machine
scp  ec2-user@3.145.86.177:/home/ec2-user/files/testing_scp .


transferring file between one instnace has pem key and other instance has no pem key trying to connect first by copying the public key to the other instance authorized keys
source machine first find where is the pem key 
ls ~/Downloads/*.pem
find ~/Downloads -name "*.pem"
cd .ssh
ls
cat id_rsa.pub
//copy the public key
on destination machine which as no pem key 
 mkdir -p ~/.ssh
 echo "<paste-public-key-here>" >> ~/.ssh/authorized_keys
 chmod 600 ~/.ssh/authorized_keys

test connection from source to remote dest ip B  public ip
$ssh ec2-user@<remote-ip>
 example:
$ ssh ec2-user@3.145.86.177
if it connects 
scp /home/ec2-user/newfile.txt ec2-user@3.145.86.177:/home/ec2-user/files
test the file exists in destination machine.

to get the files from the destination machine to source machine
from source machine
scp ec2-user@18.118.126.116:/home/ec2-user/current_file.txt .

